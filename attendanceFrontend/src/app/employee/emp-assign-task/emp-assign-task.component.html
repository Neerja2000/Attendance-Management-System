<div class="container mt-4">
  <h2 class="text-center mb-4">Project-Based Task Assignment</h2>
  <div class="card">
    <div class="card-header">
      <h5 class="card-title">Assign Tasks</h5>
    </div>
    <div class="card-body">
      <form id="task-form" (ngSubmit)="assignTask()">
        <div class="mb-3">
          <label for="project" class="form-label">Select Project</label>
          <select id="project" class="form-select" required (change)="onProjectChange($event)">
            <option value="" disabled selected>Select a project</option>
            <option *ngFor="let project of projects" [value]="project._id">{{ project.projectName }}</option>
          </select>
        </div>
  
        <div class="mb-3">
          <label for="task" class="form-label">Select Task</label>
          <select id="task" class="form-select" required>
            <option value="" disabled selected>Select a task</option>
            <option *ngFor="let task of tasks" 
              [value]="task._id" 
              [disabled]="task.status === 'completed'">
              {{ task.projectId.projectName }}  <!-- Adjust if the task name is located elsewhere -->
              <span *ngIf="task.status === 'completed'"> (Completed)</span>
            </option>
          </select>
        </div>
        
        <div class="mb-3">
          <label class="form-label">Select Days</label>
          <div class="row">
            <div class="col">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="monday" [(ngModel)]="days['monday']" name="monday" (change)="updateDates()">
                <label class="form-check-label" for="monday">Monday</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="tuesday" [(ngModel)]="days['tuesday']" name="tuesday" (change)="updateDates()">
                <label class="form-check-label" for="tuesday">Tuesday</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="wednesday" [(ngModel)]="days['wednesday']" name="wednesday" (change)="updateDates()">
                <label class="form-check-label" for="wednesday">Wednesday</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="thursday" [(ngModel)]="days['thursday']" name="thursday" (change)="updateDates()">
                <label class="form-check-label" for="thursday">Thursday</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="friday" [(ngModel)]="days['friday']" name="friday" (change)="updateDates()">
                <label class="form-check-label" for="friday">Friday</label>
              </div>
            </div>
          </div>
        </div>
  
        <div class="mb-3">
          <label class="form-label">Selected Dates</label>
          <div *ngFor="let day of selectedDates">
            <p>{{ day.day }} - {{ day.date | date}}</p>
          </div>
        </div>
  
        <button type="submit" class="btn btn-primary mt-5">Assign Task</button>
      </form>
    </div>
  </div>
</div>
